<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.7.0/math.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Калькулятор</h1>
            <nav class="tabs">
                <button class="tab-btn active" data-tab="calculator">Калькулятор</button>
                <button class="tab-btn" data-tab="graphs">Графики</button>
                <button class="tab-btn" data-tab="3d-graphs">3D Графики</button>
                <button class="tab-btn" data-tab="matrices">Матрицы</button>
                <button class="tab-btn" data-tab="complex">Комплексные числа</button>
                <button class="tab-btn" data-tab="calculus">Исчисления</button>
                <button class="tab-btn" data-tab="converter">Конвертер</button>
                <button class="tab-btn" data-tab="number-theory">Теория чисел</button>
                <button class="tab-btn" data-tab="statistics">Статистика</button>
            </nav>
        </header>

        <main>
            <!-- Основной калькулятор -->
            <section id="calculator" class="tab-content active">
                <div class="calculator-grid">
                    <div class="display-section">
                        <div class="history"></div>
                        <input type="text" id="display" class="display" placeholder="Введите выражение..." readonly>
                        <div class="result" id="result"></div>
                    </div>
                    
                    <div class="buttons-section">
                        <div class="button-grid">
                            <!-- Стандартные кнопки -->
                            <button class="btn clear" onclick="clearDisplay()">C</button>
                            <button class="btn clear" onclick="clearEntry()">CE</button>
                            <button class="btn operator" onclick="appendToDisplay('←')">⌫</button>
                            <button class="btn operator" onclick="appendToDisplay('/')">÷</button>
                            
                            <button class="btn number" onclick="appendToDisplay('7')">7</button>
                            <button class="btn number" onclick="appendToDisplay('8')">8</button>
                            <button class="btn number" onclick="appendToDisplay('9')">9</button>
                            <button class="btn operator" onclick="appendToDisplay('*')">×</button>
                            
                            <button class="btn number" onclick="appendToDisplay('4')">4</button>
                            <button class="btn number" onclick="appendToDisplay('5')">5</button>
                            <button class="btn number" onclick="appendToDisplay('6')">6</button>
                            <button class="btn operator" onclick="appendToDisplay('-')">−</button>
                            
                            <button class="btn number" onclick="appendToDisplay('1')">1</button>
                            <button class="btn number" onclick="appendToDisplay('2')">2</button>
                            <button class="btn number" onclick="appendToDisplay('3')">3</button>
                            <button class="btn operator" onclick="appendToDisplay('+')">+</button>
                            
                            <button class="btn number" onclick="appendToDisplay('0')">0</button>
                            <button class="btn number" onclick="appendToDisplay('.')">.</button>
                            <button class="btn equals" onclick="calculate()">=</button>
                            <button class="btn operator" onclick="appendToDisplay('^')">^</button>
                            
                            <!-- Расширенные функции -->
                            <button class="btn function" onclick="appendToDisplay('sin(')">sin</button>
                            <button class="btn function" onclick="appendToDisplay('cos(')">cos</button>
                            <button class="btn function" onclick="appendToDisplay('tan(')">tan</button>
                            <button class="btn function" onclick="appendToDisplay('sqrt(')">√</button>
                            
                            <button class="btn function" onclick="appendToDisplay('log(')">log</button>
                            <button class="btn function" onclick="appendToDisplay('ln(')">ln</button>
                            <button class="btn function" onclick="appendToDisplay('pi')">π</button>
                            <button class="btn function" onclick="appendToDisplay('e')">e</button>
                            
                            <button class="btn function" onclick="appendToDisplay('(')">(</button>
                            <button class="btn function" onclick="appendToDisplay(')')">)</button>
                            <button class="btn function" onclick="appendToDisplay('!')">!</button>
                            <button class="btn function" onclick="appendToDisplay('abs(')">|x|</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Графики функций -->
            <section id="graphs" class="tab-content">
                <div class="graph-container">
                    <div class="graph-controls">
                        <div class="input-group">
                            <label for="functionInput">Функция f(x) =</label>
                            <input type="text" id="functionInput" placeholder="например: sin(x)" value="sin(x)">
                        </div>
                        <div class="input-group">
                            <label for="functionInput2">Функция g(x) =</label>
                            <input type="text" id="functionInput2" placeholder="например: cos(x)" value="cos(x)">
                        </div>
                        <div class="range-controls">
                            <div class="range-group">
                                <label>X min:</label>
                                <input type="number" id="xMin" value="-10" step="1">
                            </div>
                            <div class="range-group">
                                <label>X max:</label>
                                <input type="number" id="xMax" value="10" step="1">
                            </div>
                            <div class="range-group">
                                <label>Y min:</label>
                                <input type="number" id="yMin" value="-5" step="1">
                            </div>
                            <div class="range-group">
                                <label>Y max:</label>
                                <input type="number" id="yMax" value="5" step="1">
                            </div>
                        </div>
                        <div class="button-group">
                            <button class="btn primary" onclick="plotFunctions()">Построить графики</button>
                            <button class="btn secondary" onclick="clearGraph()">Очистить</button>
                        </div>
                    </div>
                    <div class="canvas-container">
                        <canvas id="graphCanvas" width="800" height="600"></canvas>
                        <div class="zoom-controls">
                            <button class="btn small" onclick="zoomIn()">+</button>
                            <button class="btn small" onclick="zoomOut()">−</button>
                            <button class="btn small" onclick="resetZoom()">↺</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3D Графики -->
            <section id="3d-graphs" class="tab-content">
                <div class="graph-container">
                    <div class="graph-controls">
                        <h3>3D График функции z = f(x, y)</h3>
                        <div class="input-group">
                            <label for="function3dInput">Функция f(x, y) =</label>
                            <input type="text" id="function3dInput" placeholder="например: sin(x) * cos(y)" value="sin(sqrt(x^2 + y^2))">
                        </div>
                        <div class="range-controls">
                            <div class="range-group">
                                <label>X min:</label>
                                <input type="number" id="x3dMin" value="-10" step="1">
                            </div>
                            <div class="range-group">
                                <label>X max:</label>
                                <input type="number" id="x3dMax" value="10" step="1">
                            </div>
                            <div class="range-group">
                                <label>Y min:</label>
                                <input type="number" id="y3dMin" value="-10" step="1">
                            </div>
                            <div class="range-group">
                                <label>Y max:</label>
                                <input type="number" id="y3dMax" value="10" step="1">
                            </div>
                        </div>
                        <div class="button-group">
                            <button class="btn primary" onclick="plot3dFunction()">Построить 3D график</button>
                        </div>
                    </div>
                    <div class="canvas-container">
                        <div id="graph3dCanvas" style="width:100%;height:600px;"></div>
                    </div>
                </div>
            </section>

            <!-- Матрицы -->
            <section id="matrices" class="tab-content">
                <div class="matrix-container">
                    <div class="matrix-controls">
                        <h3>Операции с матрицами</h3>
                        <div class="matrix-inputs">
                            <div class="matrix-group">
                                <h4>Матрица A</h4>
                                <div class="matrix-dimension-controls">
                                    <label>Ряды:</label>
                                    <input type="number" id="matrixARows" value="2" min="1" max="10">
                                    <label>Колонки:</label>
                                    <input type="number" id="matrixACols" value="2" min="1" max="10">
                                </div>
                                <div id="matrixA-grid" class="matrix-grid"></div>
                            </div>
                            <div class="matrix-group">
                                <h4>Матрица B (или вектор b)</h4>
                                <div class="matrix-dimension-controls">
                                    <label>Ряды:</label>
                                    <input type="number" id="matrixBRows" value="2" min="1" max="10">
                                    <label>Колонки:</label>
                                    <input type="number" id="matrixBCols" value="1" min="1" max="10">
                                </div>
                                <div id="matrixB-grid" class="matrix-grid"></div>
                            </div>
                        </div>
                        <div class="matrix-operations">
                            <button class="btn operation" onclick="multiplyMatrices()">A × B</button>
                            <button class="btn operation" onclick="addMatrices()">A + B</button>
                            <button class="btn operation" onclick="subtractMatrices()">A - B</button>
                            <button class="btn operation" onclick="determinantA()">det(A)</button>
                            <button class="btn operation" onclick="inverseA()">A⁻¹</button>
                            <button class="btn operation" onclick="transposeA()">Aᵀ</button>
                            <button class="btn operation" onclick="eigenA()">Eig(A)</button>
                            <button class="btn operation" onclick="solveLinearSystem()">Solve Ax=b</button>
                        </div>
                        <div class="matrix-result">
                            <h4>Результат:</h4>
                            <div id="matrixResult" class="result-display"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Комплексные числа -->
            <section id="complex" class="tab-content">
                <div class="complex-container">
                    <div class="complex-controls">
                        <h3>Комплексные числа</h3>
                        <div class="complex-inputs">
                            <div class="input-group">
                                <label>Комплексное число z₁ = a + bi</label>
                                <div class="complex-input">
                                    <input type="number" id="real1" placeholder="a" value="3" step="any">
                                    <span>+</span>
                                    <input type="number" id="imag1" placeholder="b" value="4" step="any">
                                    <span>i</span>
                                </div>
                            <div class="input-group">
                                <label>Комплексное число z₂ = c + di</label>
                                <div class="complex-input">
                                    <input type="number" id="real2" placeholder="c" value="1" step="any">
                                    <span>+</span>
                                    <input type="number" id="imag2" placeholder="d" value="2" step="any">
                                    <span>i</span>
                                </div>
                            </div>
                        </div>
                        <div class="complex-operations">
                            <button class="btn operation" onclick="addComplex()">z₁ + z₂</button>
                            <button class="btn operation" onclick="subtractComplex()">z₁ - z₂</button>
                            <button class="btn operation" onclick="multiplyComplex()">z₁ × z₂</button>
                            <button class="btn operation" onclick="divideComplex()">z₁ ÷ z₂</button>
                            <button class="btn operation" onclick="modulusComplex1()">|z₁|</button>
                            <button class="btn operation" onclick="modulusComplex2()">|z₂|</button>
                            <button class="btn operation" onclick="conjugateComplex1()">z₁̄</button>
                            <button class="btn operation" onclick="conjugateComplex2()">z₂̄</button>
                        </div>
                        <div class="complex-result">
                            <h4>Результат:</h4>
                            <div id="complexResult" class="result-display"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Исчисления -->
            <section id="calculus" class="tab-content">
                <div class="calculus-container">
                    <div class="calculus-controls">
                        <h3>Исчисления</h3>
                        <div class="calculus-inputs">
                            <div class="input-group">
                                <label for="functionCalculus">Функция f(x) =</label>
                                <input type="text" id="functionCalculus" placeholder="например: x^2 + 3*x + 2" value="x^2">
                            </div>
                            <div class="input-group">
                                <label for="pointCalculus">Точка x =</label>
                                <input type="number" id="pointCalculus" placeholder="Точка для производной" value="2" step="any">
                            </div>
                            <div class="input-group">
                                <label for="integralLower">Интеграл от a =</label>
                                <input type="number" id="integralLower" placeholder="Нижний предел" value="0" step="any">
                            </div>
                            <div class="input-group">
                                <label for="integralUpper">Интеграл до b =</label>
                                <input type="number" id="integralUpper" placeholder="Верхний предел" value="1" step="any">
                            </div>
                        </div>
                        <div class="calculus-operations">
                            <button class="btn operation" onclick="differentiate()">Найти f'(x)</button>
                            <button class="btn operation" onclick="evaluateDerivative()">f'(x₀)</button>
                            <button class="btn operation" onclick="integrate()">∫f(x)dx</button>
                            <button class="btn operation" onclick="definiteIntegral()">∫[a,b]f(x)dx</button>
                        </div>
                        <div class="calculus-result">
                            <h4>Результат:</h4>
                            <div id="calculusResult" class="result-display"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Конвертер -->
            <section id="converter" class="tab-content">
                <div class="converter-container">
                    <h3>Конвертер величин</h3>
                    <div class="converter-controls">
                        <div class="input-group">
                            <label for="unitCategory">Категория:</label>
                            <select id="unitCategory"></select>
                        </div>
                        <div class="conversion-ui">
                            <div class="conversion-group">
                                <input type="number" id="fromValue" value="1">
                                <select id="fromUnit"></select>
                            </div>
                            <div class="equals-sign">=</div>
                            <div class="conversion-group">
                                <div id="toValue" class="result-display"></div>
                                <select id="toUnit"></select>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Теория чисел -->
            <section id="number-theory" class="tab-content">
                <div class="number-theory-container">
                    <h3>Теория чисел</h3>
                    <div class="number-theory-grid">
                        <!-- GCD and LCM -->
                        <div class="number-theory-card">
                            <h4>НОД и НОК</h4>
                            <div class="input-group">
                                <input type="number" id="gcdLcmA" placeholder="Число A" value="48">
                                <input type="number" id="gcdLcmB" placeholder="Число B" value="18">
                            </div>
                            <div class="button-group">
                                <button class="btn primary" onclick="calculateGcd()">НОД (GCD)</button>
                                <button class="btn primary" onclick="calculateLcm()">НОК (LCM)</button>
                            </div>
                            <div id="gcdLcmResult" class="result-display"></div>
                        </div>

                        <!-- Prime Factorization -->
                        <div class="number-theory-card">
                            <h4>Разложение на простые множители</h4>
                            <div class="input-group">
                                <input type="number" id="primeFactorInput" placeholder="Введите число" value="144">
                            </div>
                            <div class="button-group">
                                <button class="btn primary" onclick="calculatePrimeFactorization()">Разложить</button>
                            </div>
                            <div id="primeFactorResult" class="result-display"></div>
                        </div>

                        <!-- Modulo -->
                        <div class="number-theory-card">
                            <h4>Операция по модулю</h4>
                            <div class="input-group">
                                <input type="number" id="modInputA" placeholder="Число" value="10">
                                <input type="number" id="modInputB" placeholder="Модуль" value="3">
                            </div>
                            <div class="button-group">
                                <button class="btn primary" onclick="calculateModulo()">A mod B</button>
                            </div>
                            <div id="modResult" class="result-display"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Статистика -->
            <section id="statistics" class="tab-content">
                <div class="statistics-container">
                    <h3>Статистический анализ</h3>
                    <div class="statistics-grid">
                        <!-- Descriptive Statistics -->
                        <div class="statistics-card">
                            <h4>Описательная статистика</h4>
                            <div class="input-group">
                                <label for="dataSetInput">Набор данных (через запятую):</label>
                                <textarea id="dataSetInput" rows="4" placeholder="1, 2, 3, 4, 5, ...">1, 2, 2, 3, 4, 5, 5, 5, 6</textarea>
                            </div>
                            <div class="button-group-stats">
                                <button class="btn primary" onclick="calculateMean()">Среднее</button>
                                <button class="btn primary" onclick="calculateMedian()">Медиана</button>
                                <button class="btn primary" onclick="calculateMode()">Мода</button>
                                <button class="btn primary" onclick="calculateStdDev()">Ст. отклонение</button>
                                <button class="btn primary" onclick="calculateVariance()">Дисперсия</button>
                            </div>
                            <div id="descStatsResult" class="result-display"></div>
                        </div>

                        <!-- Linear Regression -->
                        <div class="statistics-card">
                            <h4>Линейная регрессия (y = mx + c)</h4>
                            <div class="input-group">
                                <label for="regressionX">Данные X (через запятую):</label>
                                <textarea id="regressionX" rows="3" placeholder="1, 2, 3, ...">1, 2, 3, 4, 5</textarea>
                            </div>
                            <div class="input-group">
                                <label for="regressionY">Данные Y (через запятую):</label>
                                <textarea id="regressionY" rows="3" placeholder="2, 4, 5, 4, 5">2, 4, 5, 4, 5</textarea>
                            </div>
                            <div class="button-group">
                                <button class="btn primary" onclick="calculateLinearRegression()">Рассчитать</button>
                            </div>
                            <div id="regressionResult" class="result-display"></div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
